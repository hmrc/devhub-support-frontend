@*
 * Copyright 2024 HM Revenue & Customs
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *@

@import uk.gov.hmrc.govukfrontend.views.html.components._

@import uk.gov.hmrc.devhubsupportfrontend.controllers.routes
@import uk.gov.hmrc.apiplatform.modules.tpd.session.domain.models.UserSession
@import uk.gov.hmrc.devhubsupportfrontend.domain.models.SupportFlow
@import uk.gov.hmrc.devhubsupportfrontend.views.html.templates.Layout

@this(
  layout: Layout,
  govukPanel : GovukPanel
)

@(loggedInSession: Option[UserSession], supportFlow: SupportFlow)(implicit request: play.api.mvc.RequestHeader, messages: Messages, appConfig: AppConfig)


@layout(
  pageTitle = "Your support request has been submitted",
  loggedInSession = loggedInSession
) {
    @govukPanel(Panel(
        title = Text("Your support request has been submitted"),
        content = HtmlContent(s"""Your reference number<br><strong>${supportFlow.referenceNumber.getOrElse("Reference Not Found")}</strong>""")
    ))

    @if(loggedInSession.isDefined) {
      <div class="govuk-inset-text">
        <p class="govuk-body">
          You can now 
          <a href="@{routes.TicketController.ticketListPage(false)}" class="govuk-link govuk-link--no-visited-state">view and track your support requests</a> 
          in your Developer Hub account.
        </p>
      </div>
      <p class="govuk-body">We've sent you a confirmation email too.</p>
    } else {
      <p class="govuk-body">We've sent you a confirmation email.</p>
    }

    <h2 class="govuk-heading-m">What happens next</h2>

    <p class="govuk-body">Your request will be sent to the right team as quickly as possible.</p>
    <p class="govuk-body">The team will reply within 2 UK business days.</p>
    <p class="govuk-body">
      We'll send an email to 
      <span class="govuk-!-font-weight-bold">@{supportFlow.emailAddress.getOrElse("your email address")}</span> whenever there's an update.
    </p>
    <p class="govuk-body">You can now 
      <a href="@{appConfig.thirdPartyDeveloperFrontendUrl}" class="govuk-link govuk-link--no-visited-state">return to the Developer Hub homepage.</a>
    </p>

}
